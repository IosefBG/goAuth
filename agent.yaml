prometheus:
  wal_directory: /tmp/grafana-agent-wal
  configs:
    - name: prometheus
      remote_write:
        - url: http://localhost:9090/api/v1/write   # Update URL to use localhost
      scrape_configs:
        - job_name: 'node'
          static_configs:
            - targets: ['localhost:9100']             # Update target to use localhost

loki:
  wal_directory: /tmp/grafana-agent-wal
  configs:
    - name: logs
      clients:
        - url: http://localhost:3100/loki/api/v1/push   # Update URL to use localhost

integrations:
  prometheus_remote_write:
    - url: http://localhost:9090/api/v1/write    # Update URL to use localhost
  agent:
    enabled: true
    relabel_configs:
      - source_labels: [agent_hostname]
        target_label: instance
      - target_label: job
        replacement: "integrations/agent-check"
    metric_relabel_configs:
      - action: keep
        regex: '(prometheus_target_sync_length_seconds_sum|prometheus_target_scrapes_.*|prometheus_target_interval.*|prometheus_sd_discovered_targets|agent_build.*|agent_wal_samples_appended_total|process_start_time_seconds)'
